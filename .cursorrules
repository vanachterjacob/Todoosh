{
    "scratchpad": {
        "enabled": true,
        "path": "scratchpad.md",
        "defaultContent": "# Todoosh Scratchpad\n\nUse this space for quick notes and temporary content.\n\n## Quick Notes\n\n- \n\n## Temporary Code\n\n```javascript\n// Your code here\n```"
    },
    "general": {
        "formatOnSave": true,
        "trimTrailingWhitespace": true,
        "insertFinalNewline": true,
        "tabSize": 2,
        "indentSize": 2
    },
    "project": {
        "name": "Todoosh",
        "description": "A portable, offline-first todo list manager with Firebase sync",
        "version": "1.0.0",
        "branding": {
            "logo": {
                "type": "text",
                "font": "'Fira Code', 'Consolas', monospace",
                "gradient": {
                    "colors": [
                        "primary",
                        "accent"
                    ],
                    "angle": "120deg"
                },
                "cursor": {
                    "animation": "blink",
                    "duration": "1.2s",
                    "character": "_"
                },
                "subtitle": "offline-first task manager"
            },
            "favicons": {
                "svg": {
                    "file": "favicon.svg",
                    "size": "32x32",
                    "features": [
                        "Gradient background",
                        "Checkmark icon",
                        "Dark/light mode support"
                    ],
                    "colors": {
                        "gradient": {
                            "start": "primary (#3B82F6)",
                            "end": "accent (#8B5CF6)"
                        },
                        "icon": "white"
                    }
                },
                "png": {
                    "file": "favicon.png",
                    "size": "32x32",
                    "features": [
                        "Fallback for older browsers",
                        "Matches SVG design"
                    ]
                },
                "apple": {
                    "file": "apple-touch-icon.png",
                    "size": "180x180",
                    "features": [
                        "iOS home screen icon",
                        "High resolution",
                        "No transparency"
                    ]
                }
            }
        },
        "theme": {
            "light": {
                "colors": {
                    "primary": "#3B82F6",
                    "primary_light": "#60A5FA",
                    "primary_dark": "#2563EB",
                    "text": "#1F2937",
                    "text_light": "#6B7280",
                    "background": "#FFFFFF",
                    "background_light": "#F9FAFB",
                    "background_dark": "#F3F4F6",
                    "border": "#E2E8F0",
                    "success": "#10B981",
                    "danger": "#EF4444",
                    "accent": "#8B5CF6"
                }
            },
            "dark": {
                "colors": {
                    "primary": "#61AFEF",
                    "primary_light": "#528BFF",
                    "primary_dark": "#4D78CC",
                    "text": "#ABB2BF",
                    "text_light": "#7F848E",
                    "background": "#282C34",
                    "background_light": "#2F333D",
                    "background_dark": "#21252B",
                    "border": "#3E4451",
                    "success": "#98C379",
                    "danger": "#E06C75",
                    "accent": "#C678DD"
                },
                "input": {
                    "text": "#FFFFFF",
                    "background": "#1E2227",
                    "border": "#3E4451",
                    "focus_border": "#528BFF"
                },
                "shadows": {
                    "sm": "0 1px 2px 0 rgb(0 0 0 / 0.2)",
                    "md": "0 4px 6px -1px rgb(0 0 0 / 0.3)",
                    "lg": "0 10px 15px -3px rgb(0 0 0 / 0.4)"
                }
            },
            "toggle": {
                "position": "fixed",
                "size": "44px",
                "icons": {
                    "light": "sun",
                    "dark": "moon"
                },
                "transition": "250ms ease"
            }
        },
        "requirements": {
            "portability": "Must work when opened directly from filesystem (file:// protocol)",
            "offline": "Must work without internet connection",
            "sync": "Must sync with Firebase when online",
            "dependencies": "Only Firebase is allowed as external dependency"
        },
        "features": {
            "lists": {
                "operations": [
                    "create",
                    "read",
                    "update",
                    "delete",
                    "reorder",
                    "rename",
                    "favorite"
                ],
                "properties": {
                    "id": "Unique timestamp-based identifier",
                    "name": "User-defined list name",
                    "todos": "Array of todo items",
                    "createdAt": "ISO timestamp",
                    "order": "Position in the lists array for drag and drop",
                    "favorite": "Boolean favorite status"
                },
                "ui": {
                    "actions": {
                        "favorite": {
                            "type": "toggle",
                            "trigger": "Star button",
                            "icon": "★",
                            "color": "#FFD700",
                            "visibility": "Only visible when favorited or on hover"
                        },
                        "edit": {
                            "type": "inline",
                            "trigger": "Edit button or double-click",
                            "icon": "✎",
                            "color": "primary"
                        },
                        "delete": {
                            "type": "immediate",
                            "trigger": "Delete button",
                            "confirmation": "Required when list has todos",
                            "icon": "×",
                            "color": "danger"
                        },
                        "drag": {
                            "type": "handle",
                            "trigger": "Drag handle",
                            "icon": "⋮⋮",
                            "visibility": "Only visible on hover",
                            "cursor": "grab/grabbing",
                            "position": "Left side of item"
                        }
                    },
                    "states": {
                        "normal": "Default view with name and todo count",
                        "editing": "Inline name editing with focus",
                        "active": "Currently selected list",
                        "dragging": "During drag and drop operation",
                        "favorite": "Shows gold star, sorted to top of list"
                    },
                    "interactions": {
                        "hover": "Shows action buttons and subtle highlight",
                        "active": "Highlights with primary color",
                        "editing": "Shows inline edit input",
                        "favorite": "Shows star icon on hover, always visible when favorited"
                    }
                }
            },
            "todos": {
                "operations": [
                    "create",
                    "read",
                    "update",
                    "delete",
                    "reorder",
                    "favorite"
                ],
                "properties": {
                    "id": "Unique timestamp-based identifier",
                    "text": "User-defined todo text",
                    "completed": "Boolean completion status",
                    "createdAt": "ISO timestamp",
                    "order": "Position in the todos array for drag and drop",
                    "favorite": "Boolean favorite status"
                },
                "filters": [
                    "all",
                    "active",
                    "completed"
                ],
                "ui": {
                    "actions": {
                        "favorite": {
                            "type": "toggle",
                            "trigger": "Star button",
                            "icon": "★",
                            "color": "#FFD700",
                            "visibility": "Only visible when favorited or on hover"
                        },
                        "edit": {
                            "type": "inline",
                            "trigger": "Edit button",
                            "icon": "✎",
                            "color": "primary"
                        },
                        "delete": {
                            "type": "immediate",
                            "trigger": "Delete button",
                            "icon": "×",
                            "color": "danger"
                        }
                    },
                    "states": {
                        "normal": "Default view with checkbox and text",
                        "completed": "Checked checkbox with strikethrough text",
                        "editing": "Shows edit input instead of text",
                        "favorite": "Shows gold star, sorted to top of list"
                    }
                }
            },
            "dragAndDrop": {
                "implementation": "HTML5 Drag and Drop API",
                "features": [
                    "Drag and drop todos within a list",
                    "Drag and drop lists to reorder",
                    "Visual feedback during drag",
                    "Smooth animations",
                    "Touch-friendly handles",
                    "Smart drop zones",
                    "Position indicators",
                    "Protected action areas"
                ],
                "persistence": {
                    "local": "Immediate update in localStorage",
                    "remote": "Synced to Firebase after reordering",
                    "offline": "Works without internet connection"
                },
                "ui": {
                    "dragHandle": {
                        "visibility": "Progressive disclosure on hover",
                        "style": "Vertical dots (⋮⋮)",
                        "position": "Left side",
                        "cursor": {
                            "default": "grab",
                            "dragging": "grabbing"
                        }
                    },
                    "dropIndicator": {
                        "style": "Animated line with dots",
                        "color": "primary",
                        "position": "Dynamic based on drop zone",
                        "animation": "Smooth transition"
                    },
                    "dragPreview": {
                        "opacity": "0.7",
                        "scale": "0.98",
                        "feedback": "Visual transform"
                    }
                }
            },
            "sync": {
                "status": [
                    "Online",
                    "Offline",
                    "Connecting",
                    "Permission Denied",
                    "Sync Error",
                    "Syncing"
                ],
                "storage": {
                    "local": "localStorage for offline persistence",
                    "remote": "Firebase Realtime Database",
                    "sync": "Bidirectional with offline-first priority"
                },
                "initialization": {
                    "sequence": [
                        "Wait for Firebase connection",
                        "Test write permissions",
                        "Load initial Firebase data",
                        "Fall back to localStorage if needed",
                        "Start real-time sync"
                    ],
                    "error_handling": [
                        "Connection failure fallback",
                        "Permission error detection",
                        "Data validation",
                        "Sync error recovery"
                    ]
                },
                "cross_browser": {
                    "enabled": true,
                    "features": [
                        "Shared data across windows",
                        "Incognito mode support",
                        "Real-time updates",
                        "Conflict resolution"
                    ]
                }
            }
        },
        "ui": {
            "layout": {
                "type": "CSS Grid and Flexbox based",
                "structure": {
                    "sidebar": "280px fixed width with responsive collapse",
                    "main": "Fluid 1fr with max-width 1200px",
                    "responsive": "Breakpoint at 768px for mobile layout"
                }
            },
            "theme": {
                "colors": {
                    "primary": "#4A90E2",
                    "primary_light": "#6BA4E7",
                    "primary_dark": "#357ABD",
                    "text": "#2C3E50",
                    "text_light": "#7F8C8D",
                    "background": "#FFFFFF",
                    "background_light": "#F8FAFC",
                    "background_dark": "#EDF2F7",
                    "border": "#E2E8F0",
                    "success": "#4CAF50",
                    "danger": "#FF4444"
                },
                "spacing": {
                    "xs": "0.25rem",
                    "sm": "0.5rem",
                    "md": "1rem",
                    "lg": "1.5rem",
                    "xl": "2rem"
                },
                "transitions": {
                    "quick": "150ms ease",
                    "normal": "250ms ease"
                },
                "shadows": {
                    "sm": "0 1px 3px rgba(0,0,0,0.1)",
                    "md": "0 4px 6px rgba(0,0,0,0.1)",
                    "lg": "0 10px 15px rgba(0,0,0,0.1)"
                }
            }
        },
        "design_decisions": {
            "layout": [
                "Sidebar-based navigation for better organization",
                "Card-based content areas for visual hierarchy",
                "Responsive design with mobile-first approach",
                "CSS Grid for main layout, Flexbox for components",
                "Favorite items sorted to top of lists"
            ],
            "interactions": [
                "Smooth transitions for all interactive elements",
                "Hover states with subtle background changes",
                "Slide-in animations for new todos",
                "Progressive disclosure for action buttons",
                "Immediate feedback for sync status",
                "Star icon only visible when favorited or on hover"
            ],
            "accessibility": [
                "High contrast color scheme",
                "Clear visual hierarchy",
                "Sufficient spacing for touch targets",
                "Semantic HTML structure",
                "Disabled states for unavailable actions"
            ],
            "responsive": [
                "Collapsible sidebar on mobile",
                "Stack layouts on smaller screens",
                "Fluid typography and spacing",
                "Touch-friendly interface adjustments"
            ]
        },
        "firebase": {
            "version": "8.10.1",
            "reason": "Using older Firebase version (8.x) instead of 9.x for file:// protocol support",
            "config": {
                "location": "firebase-config.js",
                "setup": "Uses global firebase object instead of ES modules",
                "database": "Realtime Database in europe-west1 region"
            },
            "sync_strategy": {
                "connection_test": "Uses _connection_test node for permission verification",
                "offline_first": "Prioritizes localStorage over Firebase",
                "conflict_resolution": "Last write wins with JSON comparison",
                "error_handling": "Graceful fallback to offline mode",
                "initialization": {
                    "sequence": "Promise-based connection verification",
                    "timeout": "Fallback to localStorage after connection timeout",
                    "retry": "Automatic reconnection attempts"
                },
                "data_flow": {
                    "initial_load": "Load from Firebase when connected",
                    "real_time": "Listen for remote changes",
                    "local_changes": "Update Firebase and localStorage",
                    "offline_changes": "Queue for sync when online"
                }
            }
        },
        "architecture": {
            "files": {
                "index.html": "Main entry point, loads Firebase SDKs and scripts",
                "src/app.js": "Main application logic using class-based architecture",
                "src/js/models/List.js": "List model with operations and properties",
                "src/js/services/StorageService.js": "Handles local storage operations",
                "src/js/services/FirebaseService.js": "Manages Firebase sync",
                "src/js/services/DragDropService.js": "Handles drag and drop functionality",
                "src/styles/main.css": "Main stylesheet importing all other CSS files",
                "src/styles/base/variables.css": "CSS Custom Properties for theming",
                "src/styles/base/reset.css": "Modern CSS reset rules",
                "src/styles/base/typography.css": "Typography-related styles",
                "src/styles/layout/grid.css": "Grid layout styles",
                "src/styles/layout/sidebar.css": "Sidebar styles",
                "src/styles/components/list.css": "List component styles",
                "src/styles/components/todo.css": "Todo component styles",
                "firebase-config.js": "Firebase initialization and configuration",
                "manifest.json": "PWA support with relative paths for file:// protocol",
                "database.rules.json": "Firebase Realtime Database rules"
            },
            "data": {
                "local": "Uses localStorage for offline data persistence",
                "cloud": "Uses Firebase Realtime Database for cloud sync",
                "sync": "Bidirectional sync between local and cloud storage",
                "validation": "Array and object validation throughout the codebase"
            }
        },
        "important_decisions": {
            "firebase_setup": [
                "Using global script loading instead of ES modules",
                "Firebase 8.10.1 instead of 9.x for file:// protocol support",
                "No module imports/exports to support direct file opening",
                "Database variable exposed globally",
                "Connection testing with temporary node"
            ],
            "offline_first": [
                "localStorage as primary data store",
                "Firebase sync as secondary with conflict resolution",
                "Service Worker only active on HTTPS",
                "Sync status indicator in UI",
                "Graceful offline mode handling"
            ],
            "security": [
                "Permissive Firebase rules for development",
                "API key restrictions recommended for production",
                "Database rules should be tightened for production"
            ],
            "data_integrity": [
                "Null checks throughout the codebase",
                "Array validation before operations",
                "Default values for missing properties",
                "Safe property access patterns",
                "Error handling for all async operations"
            ]
        }
    }
}